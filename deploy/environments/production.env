# Production Environment Configuration
# Copa Airlines Production Deployment

# Environment
ENV=production
DEBUG=false
LOG_LEVEL=INFO

# Neo4j Cluster
NEO4J_URI=bolt+routing://neo4j-cluster.baggage-ai.svc.cluster.local:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=${NEO4J_PASSWORD_FROM_VAULT}
NEO4J_DATABASE=baggage_prod
NEO4J_MAX_CONNECTION_POOL_SIZE=100
NEO4J_CONNECTION_TIMEOUT=30
NEO4J_MAX_TRANSACTION_RETRY_TIME=30

# Redis Cluster
REDIS_HOST=redis-cluster.baggage-ai.svc.cluster.local
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=${REDIS_PASSWORD_FROM_VAULT}
REDIS_MAX_CONNECTIONS=200
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false
API_BACKLOG=2048
API_TIMEOUT_KEEP_ALIVE=75

# Rate Limiting (Copa Airlines Production Limits)
RATE_LIMIT_PER_MINUTE=1000
BURST_SIZE=100
RATE_LIMIT_BY_IP=true
RATE_LIMIT_BY_API_KEY=true

# Circuit Breaker (Production Settings)
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60
CIRCUIT_BREAKER_HALF_OPEN_REQUESTS=3

# Cache
CACHE_ENABLED=true
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE_MB=2048
CACHE_EVICTION_POLICY=lru

# External Systems (Copa Airlines Production)
WORLDTRACER_API_URL=https://api.worldtracer.aero/v2
WORLDTRACER_API_KEY=${WORLDTRACER_API_KEY_FROM_VAULT}
WORLDTRACER_TIMEOUT=10
WORLDTRACER_MAX_RETRIES=3

DCS_API_URL=https://dcs.copaair.com/api/v1
DCS_API_KEY=${DCS_API_KEY_FROM_VAULT}
DCS_TIMEOUT=5
DCS_MAX_RETRIES=3

BHS_MQ_HOST=bhs-mq.copaair.com
BHS_MQ_PORT=5671
BHS_MQ_USERNAME=${BHS_MQ_USERNAME_FROM_VAULT}
BHS_MQ_PASSWORD=${BHS_MQ_PASSWORD_FROM_VAULT}
BHS_MQ_VHOST=/baggage
BHS_MQ_SSL=true

COURIER_API_URL=https://api.fedex.com/ship/v1
COURIER_API_KEY=${COURIER_API_KEY_FROM_VAULT}
COURIER_BACKUP_PROVIDER=ups

NOTIFICATION_API_URL=https://api.twilio.com/2010-04-01
NOTIFICATION_API_KEY=${NOTIFICATION_API_KEY_FROM_VAULT}
NOTIFICATION_FALLBACK_PROVIDER=sendgrid

# Feature Flags (Production)
ENABLE_SEMANTIC_ENRICHMENT=true
ENABLE_DATA_FUSION=true
ENABLE_AUTO_PIR_CREATION=true
ENABLE_COURIER_BOOKING=true
ENABLE_METRICS=true
ENABLE_TRACING=true
ENABLE_AUDIT_LOGGING=true

# Monitoring
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_ENABLED=true
GRAFANA_PORT=3000
ALERTMANAGER_ENABLED=true
ALERTMANAGER_WEBHOOK_URL=${ALERTMANAGER_WEBHOOK_FROM_VAULT}

# Security (Production - All Enabled)
OAUTH2_ENABLED=true
OAUTH2_ISSUER=https://auth.copaair.com
OAUTH2_AUDIENCE=baggage-ai-api
OAUTH2_JWKS_URL=https://auth.copaair.com/.well-known/jwks.json

TLS_ENABLED=true
TLS_CERT_PATH=/etc/ssl/certs/baggage-ai.crt
TLS_KEY_PATH=/etc/ssl/private/baggage-ai.key
TLS_MIN_VERSION=1.2

API_KEY_REQUIRED=true
API_KEY_HEADER=X-API-Key

CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=https://ops.copaair.com,https://mobile.copaair.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE
CORS_MAX_AGE=3600

# Audit & Compliance
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
PII_ENCRYPTION_ENABLED=true
GDPR_COMPLIANCE_MODE=true

# Tenant (Copa Airlines)
TENANT_ID=copa_airlines
TENANT_NAME=Copa Airlines
TENANT_REGION=latam
TENANT_TIMEZONE=America/Panama

# Performance Tuning
MAX_CONCURRENT_WORKFLOWS=100
MAX_CONCURRENT_REQUESTS=1000
REQUEST_TIMEOUT_SECONDS=60
GRACEFUL_SHUTDOWN_TIMEOUT=30

# Disaster Recovery
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=copa-baggage-ai-backups
BACKUP_S3_REGION=us-east-1

# High Availability
HA_MODE=active-active
FAILOVER_ENABLED=true
HEALTH_CHECK_INTERVAL=10
HEALTH_CHECK_TIMEOUT=5
